# AI Summary Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã–∂–∏–º–æ–∫ –∏–∑ –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ –∏ —Ç–µ–∫—Å—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Qdrant.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéµ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ** - —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—ã–∂–∏–º–æ–∫ –∏–∑ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤
- üé¨ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—ã–∂–∏–º–æ–∫
- üìù **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ –≤—ã–∂–∏–º–æ–∫ –∏–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- üîç **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ –≤—ã–∂–∏–º–æ–∫ –ø–æ —Å–º—ã—Å–ª—É —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ø–æ—Ä–æ–≥–æ–º
- üß© **–ß–∞–Ω–∫–æ–≤–∞–Ω–∏–µ** - —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∏—Å–∫–∞
- ü§ñ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Docker Models —Å fallback –Ω–∞ OpenAI
- üê≥ **Docker** - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **FastAPI** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å REST API
- **Qdrant** - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **Docker Models** - –ª–æ–∫–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã–∂–∏–º–æ–∫
- **OpenAI** - fallback –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **Whisper** - —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ OpenAI API
- **FFmpeg** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –ß–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd ai
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, –¥–æ–±–∞–≤–∏–≤ –≤–∞—à OPENAI_API_KEY
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
docker-compose up -d
```

4. –°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
uv sync
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Qdrant:
```bash
docker-compose up qdrant -d
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
cd src && python main.py
```

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ
```
GET /
```

### –°–æ–∑–¥–∞–Ω–∏–µ –≤—ã–∂–∏–º–æ–∫
```
POST /summarize/text
POST /summarize/audio
POST /summarize/video
```

### –ü–æ–∏—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```
POST /search
GET /summaries
GET /health
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ –≤—ã–∂–∏–º–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞
```bash
curl -X POST "http://localhost:8000/summarize/text" \
     -H "Content-Type: application/json" \
     -d '{
       "text": "–í–∞—à –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...",
       "file_path": "example.txt"
     }'
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
```bash
curl -X POST "http://localhost:8000/summarize/audio" \
     -F "file=@audio.ogg" \
     -F "language=ru"
```

#### –ü–æ–∏—Å–∫ –≤—ã–∂–∏–º–æ–∫
```bash
curl -X POST "http://localhost:8000/search" \
     -H "Content-Type: application/json" \
     -d '{
       "query": "–≤–∞—à –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å",
       "limit": 5,
       "min_score": 0.3
     }'
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```env
# OpenAI API
OPENAI_API_KEY=your_api_key_here

# –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
LOCAL_MODELS_URL=http://model-runner.docker.internal/engines/llama.cpp/v1
LOCAL_CHAT_MODEL=ai/smollm2
LOCAL_EMBEDDING_MODEL=ai/mxbai-embed-large
USE_LOCAL_MODELS=true

# Qdrant
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=summaries
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è: `GET /health`
- –õ–æ–≥–∏ Docker: `docker-compose logs ai-summary`
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Qdrant: http://localhost:6333/dashboard

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.py                # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ qdrant_manager.py      # –†–∞–±–æ—Ç–∞ —Å Qdrant
‚îÇ   ‚îú‚îÄ‚îÄ local_models_client.py # –ö–ª–∏–µ–Ω—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ tools.py               # –£—Ç–∏–ª–∏—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞
‚îú‚îÄ‚îÄ Dockerfile                 # –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yml         # Orchestration
‚îî‚îÄ‚îÄ pyproject.toml            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
